# FAB 面板展开效果示意图

## 📐 布局理解（Plaintext 示意）

> **说明**：以下所有示意图均以 FAB 在**左下角**为例展示。  
> FAB 在右侧时，布局为左侧的**完全镜像**，不再单独展示。
>
> **设计规范**（基于 shadcn/ui）：
> - FAB 尺寸：40x40px（标准图标容器）
> - FAB 位置：左下角固定（距左边缘 24px，距底部 24px）
> - FAB 与面板间距：**4px**（紧密连接）
> - FAB 状态：关闭时显示主图标（✨），打开时显示关闭图标（✕）
> - 动画时长：150-180ms（快速响应）

### 场景 1：初始状态 - FAB 按钮（关闭状态）

```
屏幕
┌─────────────────────────────────────────────────┐
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│ ┌──┐                                            │
│ │✨│  <- FAB 按钮（左下角，40x40px）             │
│ └──┘     位置：距左 24px，距底 24px              │
│          配色：bg-primary + shadow-lg            │
└─────────────────────────────────────────────────┘
```

---

### 场景 2：点击 FAB - 显示第一段（提示词列表）

**提示词列表从 FAB 弹出，间距仅 4px（紧密连接）**  
**FAB 图标切换为 ✕ 关闭图标（180ms rotation 动画）**

```
屏幕
┌─────────────────────────────────────────────────┐
│                                                 │
│                                                 │
│                                                 │
│                                                 │
│ ┌──┐4px┌──────────────────┐                    │
│ │✕│←→│ 提示词列表        │                    │
│ └──┘  │                  │                    │
│  ↑   │ ┌──────────────┐ │                    │
│ FAB  │ │Item 1        │ │                    │
│ 打开 │ │标题：代码生成 │ │                    │
│ 状态 │ │描述：生成组件 │ │                    │
│      │ │标签 · 2天前  │ │                    │
│      │ └──────────────┘ │                    │
│      │                  │                    │
│      │ ┌──────────────┐ │                    │
│      │ │Item 2        │ │                    │
│      │ │...           │ │                    │
│      │ └──────────────┘ │                    │
│      │                  │                    │
│      │ (共10个item)     │                    │
│      └──────────────────┘                    │
│       400px 宽                                │
│       bg-background + border-border           │
└─────────────────────────────────────────────────┘
```

**关键点**：
- ✅ FAB 图标从 ✨ 旋转变为 ✕（180ms rotation 动画）
- ✅ FAB 和提示词列表间距 **4px**（紧密连接）
- ✅ 弹出动画：scale 0.95 → 1.0，时长 180ms
- ✅ 视觉上像从 FAB 弹出的气泡面板
- ✅ 面板底部与 FAB 底部对齐

---

### 场景 3：鼠标悬停 Item - 显示 Action Buttons

**布局顺序（从左到右）：FAB → 提示词列表 → Action Buttons（竖向排列）**

```
屏幕 - 放大视图
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                                                             │
│ ┌──┐4px┌────────────────────────────────────────┐          │
│ │✕│←→│ Item 1: 代码生成 - React 组件           │          │
│ └──┘  │ 根据需求生成符合最佳实践的组件代码       │          │
│       │ 前端 · 组件  |  2 天前                  │          │
│       └────────────────────────────────────────┘          │
│                                                             │
│       ┌────────────────────────────────────────┐ ┌───┐     │
│       │ Item 2: Bug 修复 - API 调用            │ │📋 │     │
│       │ 修复异步请求的错误处理逻辑              │ ├───┤     │
│       │ 后端 · 调试  |  1 天前                 │ │👁 │     │
│       └────────────────────────────────────────┘ ├───┤     │
│                   ↑ 鼠标悬停在此 item             │⚙ │     │
│                                                  └───┘     │
│                                                    ↑        │
│       ┌────────────────────────────────────────┐ Action    │
│       │ Item 3: 性能优化                       │ Buttons   │
│       │ ...                                    │ (竖向3个) │
│       └────────────────────────────────────────┘           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**关键点**：
- ✅ **布局顺序**：FAB → 提示词列表 → Action Buttons（紧贴 item 右侧）
- ✅ Action Buttons **竖向排列**（3 个按钮上下排列，Ghost 风格）
- ✅ 按钮尺寸：32x32px（标准 Ghost 按钮）
- ✅ 显示动画：`opacity-0 → opacity-100`（150ms fade-in）
- ✅ Buttons 仅在鼠标悬停对应 item 时显示，离开时隐藏
- ✅ 3 个按钮：复制 📋、查看答案 👁️、管理 ⚙️

---

### 场景 4：点击"管理"按钮 - 展开第二段（编辑页面）

**展开动画：第一段保持 + 第二段从右侧滑入（宽度动态扩展，150ms）**

```
屏幕 - 完整展开状态（FAB 在左下角）
┌────────────────────────────────────────────────────────────────────────┐
│                                                                        │
│                                                                        │
│ ┌──┐4px┌──────────────┐┌──────────────────────────────┐              │
│ │✕│←→│ 提示词列表    ││ 编辑管理页面          [X]    │              │
│ └──┘  │              ││                              │              │
│       │ ┌──────────┐ ││ ┌─────────────────────────┐ │              │
│       │ │Item 1    │ ││ │ Tab: 标签管理           │ │              │
│       │ │(高亮选中)│ ││ │ Tab: 答案               │ │              │
│       │ └──────────┘ ││ │ Tab: 版本管理           │ │              │
│       │              ││ └─────────────────────────┘ │              │
│       │ ┌──────────┐ ││                              │              │
│       │ │Item 2    │ ││ [编辑表单内容区域]           │              │
│       │ └──────────┘ ││                              │              │
│       │              ││                              │              │
│       │ ...          ││                              │              │
│       │              ││                              │              │
│       └──────────────┘│ [保存] [删除]               │              │
│        400px 宽       └──────────────────────────────┘              │
│                        400px 宽                                      │
│                                                                        │
│   完整布局：FAB(40px) + 间距(4px) + 列表(400px) + 编辑(400px) = 844px │
└────────────────────────────────────────────────────────────────────────┘
```

**展开过程动画（分步展示）**：

```
步骤 1: 仅提示词列表（点击"管理"前）
┌──┐4px┌──────────────┐
│✕│←→│ 提示词列表    │
└──┘  │ (Item 1 高亮) │
      └──────────────┘
      400px 宽

↓ (150ms 动画)

步骤 2: 第二段从右侧滑入中
┌──┐4px┌──────────────┐ ┌────→
│✕│←→│ 提示词列表    │ │编辑页...
└──┘  │ (保持显示)    │ │
      └──────────────┘ └────→
      400px           (滑入中)

↓

步骤 3: 展开完成
┌──┐4px┌──────────────┐ ┌──────────────────┐
│✕│←→│ 提示词列表    │ │ 编辑管理页面      │
└──┘  │ (保持显示)    │ │ (完全显示)        │
      └──────────────┘ └──────────────────┘
      400px 宽            400px 宽
    
      总宽度 = 40px + 4px + 400px + 400px = 844px
```

**关键点**：
- ✅ FAB 保持打开状态（显示 ✕ 图标）
- ✅ 选中的 item 显示高亮状态（如 `bg-violet-50 border-violet-200`）
- ✅ 第二段滑入动画：150ms slide-in from right
- ✅ 面板总宽度动态扩展：444px → 844px

---

### 场景 5：编辑页面的 Tab 切换

**编辑页面支持 3 个 Tab：标签管理、答案、版本管理**

```
编辑管理页面 (400px 宽)
┌──────────────────────────────┐
│  编辑管理             [X]     │  <- 关闭按钮
├──────────────────────────────┤
│ ┌────────┐ ┌──────┐ ┌──────┐ │
│ │标签管理│ │ 答案 │ │版本  │ │  <- Tab 标签页
│ └────────┘ └──────┘ └──────┘ │
│     (激活)   (未激活) (未激活)│
├──────────────────────────────┤
│                              │
│  Tab 内容区域：              │
│                              │
│  【标签管理 Tab】            │
│  ┌────────────────────────┐ │
│  │ 标签1  [编辑] [删除]   │ │
│  ├────────────────────────┤ │
│  │ 标签2  [编辑] [删除]   │ │
│  ├────────────────────────┤ │
│  │ + 添加新标签           │ │
│  └────────────────────────┘ │
│                              │
├──────────────────────────────┤
│  [保存更改]  [取消]          │
└──────────────────────────────┘

配色说明（shadcn/ui）：
- 激活 Tab：bg-background + border-b-2 border-primary
- 未激活 Tab：text-muted-foreground
- 按钮：shadcn/ui Button 组件（variant="default" / "outline"）
```

**切换到"答案" Tab**：
```
编辑管理页面 (400px 宽)
┌──────────────────────────────┐
│  编辑管理             [X]     │
├──────────────────────────────┤
│ ┌────────┐ ┌──────┐ ┌──────┐ │
│ │标签管理│ │ 答案 │ │版本  │ │
│ └────────┘ └──────┘ └──────┘ │
│   (未激活)   (激活)  (未激活) │
├──────────────────────────────┤
│                              │
│  【答案 Tab】                │
│  ┌────────────────────────┐ │
│  │ 答案内容展示区域        │ │
│  │                        │ │
│  │ [AI 生成的答案内容]     │ │
│  │                        │ │
│  │ (支持 Markdown 渲染)   │ │
│  │                        │ │
│  └────────────────────────┘ │
│                              │
│  [复制答案]  [重新生成]      │
├──────────────────────────────┤
│  [关闭]                      │
└──────────────────────────────┘

动画说明：
- Tab 切换动画：150ms fade (opacity + scale)
- 内容切换：淡出 → 淡入（无滑动效果）
```

---

## 🎯 核心理解总结

### 1. 统一示意规则
- **所有示意图均以 FAB 在左下角为标准**
- **FAB 在右侧时为完全镜像**，不单独展示
- 保持一致的阅读和理解体验

### 2. 布局顺序（FAB 在左侧时，从左到右）
```
FAB(40px) → 间距(4px) → 提示词列表(400px) → 编辑页面(400px)
```

### 3. 面板宽度动态变化
- **仅提示词列表**：FAB(40px) + 间距(4px) + 列表(400px) = **444px**
- **展开编辑页面**：FAB(40px) + 间距(4px) + 列表(400px) + 编辑(400px) = **844px**
- **动画**：第二段从右侧滑入（150ms），总宽度动态扩展

### 4. FAB 设计规范（shadcn/ui）
- **尺寸**：40x40px（标准图标容器）
- **位置**：固定左下角（距左 24px，距底 24px）
- **配色**：`bg-primary text-primary-foreground`
- **圆角**：`rounded-full`（完全圆角）
- **阴影**：`shadow-lg`（微妙阴影）
- **状态切换**：
  - 关闭状态：显示主图标（✨）
  - 打开状态：显示关闭图标（✕）
  - 动画：180ms rotation + opacity fade

### 5. 提示词列表与 FAB 的位置关系
- **间距**：FAB 右侧仅 **4px**（紧密连接）
- **对齐**：面板底部与 FAB 底部对齐
- **视觉效果**：像从 FAB "弹出"的气泡面板
- **弹出动画**：scale 0.95 → 1.0，时长 180ms，缓动 ease-out
- **transform-origin**：`left bottom`

### 6. Action Buttons 显示规则
- **位置**：紧贴悬停 item 的右侧
- **排列**：3 个按钮竖向排列（上下排列）
- **尺寸**：32x32px（Ghost 风格按钮）
- **显示时机**：仅鼠标悬停对应 item 时显示
- **显示动画**：`opacity-0 → opacity-100`（150ms fade-in）
- **3 个按钮**：复制 📋、查看答案 👁️、管理 ⚙️

### 7. 提示词卡片样式（shadcn/ui）
- **背景**：`bg-muted`（次要背景色）
- **边框**：`border border-border`
- **圆角**：`rounded-xl`（12px）
- **内边距**：`p-4`（16px）
- **阴影**：`shadow-sm`（微妙阴影）
- **悬停效果**：
  - 缩放：`hover:scale-[1.02]`
  - 阴影增强：`hover:shadow-md`
  - 过渡：`transition-all duration-150`
- **文本层级**：
  - 第 1 行：标题 - `text-base font-semibold text-foreground`
  - 第 2 行：描述 - `text-sm text-muted-foreground`
  - 第 3 行：标签/时间 - `text-xs text-muted-foreground`

### 8. 编辑页面结构
- **触发**：点击 Action Buttons 中的"查看答案"或"管理"按钮
- **显示**：从提示词列表右侧滑入（150ms slide-in）
- **宽度**：400px（与列表等宽）
- **关闭按钮**：明确的 X 图标按钮
- **Tab 标签页**（3 个）：
  - **标签管理**：管理提示词的标签分类
  - **答案**：显示 AI 生成的答案内容（支持 Markdown 渲染）
  - **版本管理**：管理提示词的历史版本
- **Tab 切换动画**：150ms fade（opacity + scale）

### 9. 智能定位规则
- **FAB 在屏幕左侧** → 面板向右展开（标准示意）
- **FAB 在屏幕右侧** → 面板向左展开（完全镜像）
- **上下位置固定**（不响应上下位置变化）

### 10. 动画时长规范
- **面板弹出/收起**：180ms（scale + opacity）
- **第二段滑入/滑出**：150ms（slide + opacity）
- **Action buttons 显示/隐藏**：150ms（opacity）
- **卡片悬停效果**：150ms（scale + shadow）
- **Tab 切换**：150ms（fade）
- **FAB 图标切换**：180ms（rotation + opacity）
- **缓动函数**：`ease-out`（所有动画）

---

## ✅ 关键确认点

1. ✅ **所有示意图统一以 FAB 在左下角为标准**
2. ✅ **FAB 尺寸**：40x40px（标准图标容器）
3. ✅ **FAB 与面板间距**：**4px**（紧密连接）
4. ✅ **FAB 状态切换**：✨（关闭）↔ ✕（打开），180ms rotation
5. ✅ **布局顺序**：FAB → 间距 → 提示词列表 → 编辑页面
6. ✅ **Action Buttons 竖向排列**（3 个按钮上下排列，Ghost 风格）
7. ✅ **面板宽度动态扩展**：444px → 844px
8. ✅ **编辑页面 3 个 Tab**：标签管理、答案、版本管理
9. ✅ **所有动画 ≤ 200ms**（快速响应）
10. ✅ **严格遵循 shadcn/ui 设计规范**（CSS 变量、标准组件、统一间距）

理解正确，准备开始实现优化版本！🚀
